{{ $link := .Destination }}
<!-- BEGIN Workaround to render symlinked files and served at /docs/latest/project/ -->
{{- if in .Page.RelPermalink "/docs/latest/project/" }}
    {{- if in .Destination "/docs/" }}
        {{ $link = printf "../../../../%s" (replace (replace (replace .Destination "docs/" "docs/latest/") ".md" "") "/README" "" | lower ) }}
    {{- end }}
{{- end }}
<!-- END  -->
{{ $isRemote := strings.HasPrefix $link "http" }}
{{- if not $isRemote -}}
    {{ $url := urls.Parse .Destination }}
    {{- if $url.Path -}}
        {{ $fragment := "" }}
        {{- with $url.Fragment }}
            {{ $fragment = printf "#%s" . }}
        {{ end -}}
        {{- with .Page.GetPage $url.Path }}
            {{ $link = printf "%s%s" .RelPermalink $fragment }}
        {{ end }}
    {{ end -}}
{{- end -}}
<a href="{{ $link | safeURL }}"{{ with .Title}} title="{{ . }}"{{ end }}{{ if $isRemote }} target="_blank"{{ end }}>{{ .Text | safeHTML }}</a>
